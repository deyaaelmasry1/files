<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>File Uploader</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 flex items-center justify-center h-screen">
  <div class="bg-white p-6 rounded-xl shadow-md w-96">
    <h1 class="text-2xl font-bold mb-4 text-center">Upload File</h1>
    <input id="fileInput" type="file" class="mb-4 w-full border p-2 rounded">
    <button onclick="uploadFile()" class="w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700">Upload</button>
    <p id="status" class="mt-4 text-center text-gray-700"></p>
  </div>

  <script>
    async function uploadFile() {
      const fileInput = document.getElementById("fileInput");
      const status = document.getElementById("status");

      if (!fileInput.files.length) {
        status.innerText = "Please select a file.";
        return;
      }

      const file = fileInput.files[0];
      const content = await file.arrayBuffer();
      const base64 = btoa(String.fromCharCode(...new Uint8Array(content)));

      status.innerText = "Uploading...";

      const response = await fetch("https://api.github.com/repos/YOUR_USERNAME/YOUR_REPO/dispatches", {
        method: "POST",
        headers: {
          "Authorization": "Bearer " + "YOUR_PAT_TOKEN",
          "Accept": "application/vnd.github.v3+json"
        },
        body: JSON.stringify({
          event_type: "upload-file",
          client_payload: {
            name: file.name,
            content: base64
          }
        })
      });

      if (response.ok) {
        status.innerHTML = `✅ Uploaded! Link: <a href="https://YOUR_USERNAME.github.io/YOUR_REPO/uploads/${file.name}" target="_blank" class="text-blue-600 underline">Open File</a>`;
      } else {
        status.innerText = "❌ Upload failed.";
      }
    }
  </script>
</body>
</html>
